// + АИГ Французова 24.01.2022 (Формирование отчета проводок)
&НаСервере
Процедура СформироватьОтображениеПроводокМеждународные(СтруктураПараметров)  
	
	Если НЕ ЗначениеЗаполнено(Объект.Ссылка) Тогда
		Возврат;
	КонецЕсли;
	ОбъектОтчет = РеквизитФормыВЗначение("Объект");
	Отчет = Отчеты.АИГ_ПереносПроводок_Международный.ПолучитьМакет("ОсновнаяСхемаКомпоновкиДанных");
	
	Если НЕ ЗначениеЗаполнено(Объект.Ссылка) Тогда
		Возврат;
	КонецЕсли;
	
    
    Отбор = Новый Структура;
    Отбор.Вставить("Регистратор",Объект.Ссылка);
    

	СтруктураПараметров.Вставить("Отбор",Отбор);

	
	ЗаполнитьЗначенияСвойств(Отчет.Параметры,СтруктураПараметров);
	
	Настройки = Отчет.НастройкиПоУмолчанию;
	
	//________________________________________________________________
	Настройки.Отбор.Элементы[0].ПравоеЗначение  = Объект.Ссылка;
	
	//________________________________________________________________
	ДанныеРасшифровки = Новый ДанныеРасшифровкиКомпоновкиДанных;
	КомпоновщикМакета = Новый КомпоновщикМакетаКомпоновкиДанных;
	
	ПараметрВыполненногоДействия = Новый Структура;
	
	МакетКомпоновки = КомпоновщикМакета.Выполнить(Отчет, Настройки, ДанныеРасшифровки);
	
	ПроцессорКомпоновкиДанных = Новый ПроцессорКомпоновкиДанных;
	ПроцессорКомпоновкиДанных.Инициализировать(МакетКомпоновки, , ДанныеРасшифровки,Истина);    
	
	ДанныеРасшифровкиАдрес = ПоместитьВоВременноеХранилище(ДанныеРасшифровки, ЭтотОбъект.УникальныйИдентификатор);
	
	Результат = ЭтотОбъект.ОтобразитьПроводки;             // Табличный документ
	Результат.Очистить();
	ПроцессорВывода = Новый ПроцессорВыводаРезультатаКомпоновкиДанныхВТабличныйДокумент;
	ПроцессорВывода.УстановитьДокумент(Результат);
	ПроцессорВывода.Вывести(ПроцессорКомпоновкиДанных);
	ЗначениеВРеквизитФормы(ОбъектОтчет,"Объект");
КонецПроцедуры
// - АИГ Французова 24.01.2022 (Формирование отчета проводок)


ВЫБРАТЬ
	Рег.Период КАК Период,
	Рег.ПодразделениеМСФО КАК ПодразделениеМСФО,
	Рег.Регистратор КАК Регистратор,
	Рег.Организация КАК Организация,
	Рег.НомерЖурнала КАК НомерЖурнала,
	Рег.ПервичныйДокумент КАК ПервичныйДокумент,
	Рег.ВидДокумента КАК ВидДокумента,
	Рег.Сумма КАК Сумма,
	Рег.Содержание КАК Содержание,
	Рег.ДатаПоследнегоИзмененияПервичногоДокумента КАК ДатаПоследнегоИзмененияПервичногоДокумента,
	Рег.НомерСтрочкиПроводкиБУ КАК НомерСтрочкиПроводкиБУ,
	Рег.ВалютаДт КАК ВалютаДт,
	Рег.СчетКт КАК СчетКт,
	NULL КАК СубконтоДт1,
	NULL КАК СубконтоДт2,
	NULL КАК СубконтоДт3,
	NULL КАК СубконтоДт4,
	NULL КАК СубконтоКт1,
	NULL КАК СубконтоКт2,
	NULL КАК СубконтоКт3,
	NULL КАК СубконтоКт4,
	Рег.НомерСтроки КАК НомерСтроки,
	Рег.Активность КАК Активность,
	Рег.СчетДт КАК СчетДт,
	Рег.ВалютаКт КАК ВалютаКт,
	Рег.ВалютнаяСуммаДт КАК ВалютнаяСуммаДт,
	Рег.ВалютнаяСуммаКт КАК ВалютнаяСуммаКт,
	Рег.КоличествоДт КАК КоличествоДт,
	Рег.КоличествоКт КАК КоличествоКт
ИЗ
	РегистрБухгалтерии.КК_Международный КАК Рег
ГДЕ Рег.Регистратор ССылка Документ.КК_ПереносПроводокМеждународный
	//И Рег.Регистратор = &ОбъектСсылка






