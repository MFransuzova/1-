ВЫБРАТЬ РАЗРЕШЕННЫЕ
	ИсполнительныйЛист.ДатаДействия КАК Период,
	ИсполнительныйЛист.Организация КАК Организация,
	Сотрудники.Ссылка КАК Сотрудник,
	ИсполнительныйЛист.Ссылка КАК ИсполнительныйЛист,
	ИсполнительныйЛист.ФизическоеЛицо КАК ФизическоеЛицо, 
	ИсполнительныйЛист.Дата КАК Дата,
	ИсполнительныйЛист.Номер КАК Номер,     
	ИсполнительныйЛист.СпособРасчета КАК СпособРасчета,
	ИсполнительныйЛист.Процент КАК Процент,
	ИсполнительныйЛист.Сумма КАК Сумма,
	ИсполнительныйЛист.Числитель КАК Числитель,
	ИсполнительныйЛист.Знаменатель КАК Знаменатель,
	ИсполнительныйЛист.Предел КАК Предел,
	ВЫБОР
		КОГДА ИсполнительныйЛист.СпособРасчета = ЗНАЧЕНИЕ(Перечисление.СпособыРасчетаУдержанияПоИсполнительномуДокументу.ФиксированнойСуммой)
			ТОГДА " руб."
		КОГДА ИсполнительныйЛист.ВидБазы = ЗНАЧЕНИЕ(Перечисление.ВидыБазыУдержанияПоИсполнительномуДокументу.ПрожиточныйМинимум)
			ТОГДА " прож.миним."
		КОГДА ИсполнительныйЛист.СпособРасчета = ЗНАЧЕНИЕ(Перечисление.СпособыРасчетаУдержанияПоИсполнительномуДокументу.Процентом)
			ТОГДА " %"
		КОГДА ИсполнительныйЛист.СпособРасчета = ЗНАЧЕНИЕ(Перечисление.СпособыРасчетаУдержанияПоИсполнительномуДокументу.Долей)
			ТОГДА " доли"
		ИНАЧЕ " руб."
	КОНЕЦ КАК ПорядокРасчета,
	ИсполнительныйЛист.ВидИсполнительногоДокумента КАК ВидИсполнительногоДокумента,
	ИсполнительныйЛист.РеквизитыИсполнительногоДокумента КАК РеквизитыИсполнительногоДокумента,
	ВЫБОР
		КОГДА ИсполнительныйЛист.Получатель.НаименованиеПолное ПОДОБНО ""
			ТОГДА ИсполнительныйЛист.Получатель.Наименование
		ИНАЧЕ ВЫРАЗИТЬ(ИсполнительныйЛист.Получатель.НаименованиеПолное КАК СТРОКА(300))
	КОНЕЦ КАК Получатель,
	ИсполнительныйЛист.АдресПолучателяПредставление КАК АдресПолучателя
ПОМЕСТИТЬ ВТСотрудники
ИЗ
	Документ.ИсполнительныйЛист КАК ИсполнительныйЛист
		ЛЕВОЕ СОЕДИНЕНИЕ Справочник.Сотрудники КАК Сотрудники
		ПО ИсполнительныйЛист.ФизическоеЛицо = Сотрудники.ФизическоеЛицо
			И ИсполнительныйЛист.Организация = Сотрудники.ГоловнаяОрганизация  
		
ГДЕ
	ИсполнительныйЛист.Проведен
	И (ИсполнительныйЛист.Дата < ДОБАВИТЬКДАТЕ(КОНЕЦПЕРИОДА(&ОкончаниеПериода,ДЕНЬ),МИНУТА,1)
			ИЛИ &НачалоПериода = ДАТАВРЕМЯ(1, 1, 1)
				И &ОкончаниеПериода = ДАТАВРЕМЯ(1, 1, 1))
	//И (ИсполнительныйЛист.Ссылка = &Документ
	//		ИЛИ &Документ = ЗНАЧЕНИЕ(Документ.ИсполнительныйЛист.ПустаяСсылка))
;
ВЫБРАТЬ                                  
	Удержания.Регистратор КАК УдержанРегистратор,
	Удержания.Результат КАК Результат,
	Удержания.ДокументОснование,
	Удержания.ФизическоеЛицо, 
	НАЧАЛОПЕРИОДА(Удержания.ПериодРегистрации,МЕСЯЦ) КАК УпорядочитьДанные, 
	ВЫБОР
    КОГДА МЕСЯЦ(Удержания.ПериодРегистрации)=1 ТОГДА "Январь " 
    КОГДА МЕСЯЦ(Удержания.ПериодРегистрации)=2 ТОГДА "Февраль "
    КОГДА МЕСЯЦ(Удержания.ПериодРегистрации)=3 ТОГДА "Март "  
    КОГДА МЕСЯЦ(Удержания.ПериодРегистрации)=4 ТОГДА "Апрель " 
    КОГДА МЕСЯЦ(Удержания.ПериодРегистрации)=5 ТОГДА "Май "  
    КОГДА МЕСЯЦ(Удержания.ПериодРегистрации)=6 ТОГДА "Июнь " 
    КОГДА МЕСЯЦ(Удержания.ПериодРегистрации)=7 ТОГДА "Июль " 
    КОГДА МЕСЯЦ(Удержания.ПериодРегистрации)=8 ТОГДА "Август " 
    КОГДА МЕСЯЦ(Удержания.ПериодРегистрации)=9 ТОГДА "Сентябрь "  
    КОГДА МЕСЯЦ(Удержания.ПериодРегистрации)=10 ТОГДА "Октябрь " 
    КОГДА МЕСЯЦ(Удержания.ПериодРегистрации)=11 ТОГДА "Ноябрь " 
    КОГДА МЕСЯЦ(Удержания.ПериодРегистрации)=12 ТОГДА "Декабрь " 
    КОНЕЦ 
    +" " 
    +     ПОДСТРОКА("0123456789", ГОД(Удержания.ПериодРегистрации) / 1000 + 1, 1) 
    + ПОДСТРОКА("0123456789", СЕКУНДА(ДОБАВИТЬКДАТЕ(ДАТАВРЕМЯ(1, 1, 1), СЕКУНДА, ГОД(Удержания.ПериодРегистрации) * 0.06)) / 6 + 1, 1) 
    + ПОДСТРОКА("0123456789", СЕКУНДА(ДОБАВИТЬКДАТЕ(ДАТАВРЕМЯ(1, 1, 1), СЕКУНДА, ГОД(Удержания.ПериодРегистрации) * 0.6)) / 6 + 1, 1) 
    + ПОДСТРОКА("0123456789", СЕКУНДА(ДОБАВИТЬКДАТЕ(ДАТАВРЕМЯ(1, 1, 1), СЕКУНДА, ГОД(Удержания.ПериодРегистрации) * 6)) / 6 + 1, 1)
     КАК ПериодИсполнительного,    
     ПОДСТРОКА("0123456789", ГОД(Удержания.ПериодРегистрации) / 1000 + 1, 1) 
    + ПОДСТРОКА("0123456789", СЕКУНДА(ДОБАВИТЬКДАТЕ(ДАТАВРЕМЯ(1, 1, 1), СЕКУНДА, ГОД(Удержания.ПериодРегистрации) * 0.06)) / 6 + 1, 1) 
    + ПОДСТРОКА("0123456789", СЕКУНДА(ДОБАВИТЬКДАТЕ(ДАТАВРЕМЯ(1, 1, 1), СЕКУНДА, ГОД(Удержания.ПериодРегистрации) * 0.6)) / 6 + 1, 1) 
    + ПОДСТРОКА("0123456789", СЕКУНДА(ДОБАВИТЬКДАТЕ(ДАТАВРЕМЯ(1, 1, 1), СЕКУНДА, ГОД(Удержания.ПериодРегистрации) * 6)) / 6 + 1, 1)  КАК ГодИсполнительного
ПОМЕСТИТЬ УдержанияИсполнительных
ИЗ РегистрРасчета.Удержания КАК Удержания    
ГДЕ (Удержания.ДокументОснование,Удержания.ФизическоеЛицо) 
В (ВЫБРАТЬ ИсполнительныеЛисты.ИсполнительныйЛист,
   ИсполнительныеЛисты.ФизическоеЛицо ИЗ ВТСотрудники КАК ИсполнительныеЛисты)		
;
////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ РАЗРЕШЕННЫЕ
	ДАТАВРЕМЯ(1, 1, 1) КАК Период,
	ЗНАЧЕНИЕ(Справочник.ФизическиеЛица.ПустаяСсылка) КАК ФизическоеЛицо,
	ВЫРАЗИТЬ("" КАК СТРОКА(50)) КАК Фамилия,
	ВЫРАЗИТЬ("" КАК СТРОКА(50)) КАК Имя,
	ВЫРАЗИТЬ("" КАК СТРОКА(50)) КАК Отчество,
	ВЫРАЗИТЬ("" КАК СТРОКА) КАК АдресМестаПроживания,
	ВЫРАЗИТЬ("" КАК СТРОКА) КАК АдресМестаПроживанияПредставление
ПОМЕСТИТЬ Представления_КадровыеДанныеСотрудников
ИЗ
	ВТСотрудники КАК ВТСотрудники
ГДЕ
	"ТолькоРазрешенные" = ИСТИНА
;


////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	ИсполнительныеДокументы.Период КАК МесяцНачисления,  	
	ИсполнительныеДокументы.ИсполнительныйЛист КАК ИсполнительныйЛист, 
	УдержанияИсполнительных.УдержанРегистратор КАК УдержанРегистратор,
	УдержанияИсполнительных.Результат КАК Удержано,
	ИсполнительныеДокументы.Организация КАК Организация,
	ИсполнительныеДокументы.ФизическоеЛицо КАК ФизическоеЛицо,
	ЕСТЬNULL(КадровыеДанныеСотрудников.Фамилия + " " + КадровыеДанныеСотрудников.Имя + " " + КадровыеДанныеСотрудников.Отчество, ИсполнительныеДокументы.ФизическоеЛицо.Наименование) КАК ФИОСотрудника,
	ИсполнительныеДокументы.Дата КАК Дата,   
	УдержанияИсполнительных.ПериодИсполнительного КАК ПериодИсполнительного,
	УдержанияИсполнительных.УпорядочитьДанные КАК УпорядочитьДанные,
	ИсполнительныеДокументы.Номер КАК Номер,
	ИсполнительныеДокументы.СпособРасчета КАК СпособРасчета,
	ИсполнительныеДокументы.Процент КАК Процент,
	ИсполнительныеДокументы.Сумма КАК Сумма,
	ИсполнительныеДокументы.Числитель КАК Числитель,
	ИсполнительныеДокументы.Знаменатель КАК Знаменатель,
	ИсполнительныеДокументы.Предел КАК Предел,
	ИсполнительныеДокументы.ПорядокРасчета КАК ПорядокРасчета,
	ИсполнительныеДокументы.ВидИсполнительногоДокумента КАК ВидИсполнительногоДокумента,
	ВЫРАЗИТЬ(ИсполнительныеДокументы.РеквизитыИсполнительногоДокумента КАК СТРОКА(500)) КАК РеквизитыИсполнительногоДокумента,
	ИсполнительныеДокументы.Получатель КАК Получатель,
	ВЫРАЗИТЬ(ИсполнительныеДокументы.АдресПолучателя КАК СТРОКА(500)) КАК АдресПолучателя,
	ВЫРАЗИТЬ(КадровыеДанныеСотрудников.АдресМестаПроживанияПредставление КАК СТРОКА(500)) КАК АдресМестаПроживанияСотрудника
{ВЫБРАТЬ
	МесяцНачисления,
	ИсполнительныйЛист.*,
	Организация.*,
	ФизическоеЛицо.*,
	ФИОСотрудника,
	Дата,
	Номер,
	СпособРасчета.*,
	Процент,
	Сумма,
	Числитель,
	Знаменатель,
	Предел,
	ПорядокРасчета,
	ВидИсполнительногоДокумента.*,
	РеквизитыИсполнительногоДокумента,
	Получатель,
	АдресПолучателя,
	АдресМестаПроживанияСотрудника}
ИЗ
	ВТСотрудники КАК ИсполнительныеДокументы
		ЛЕВОЕ СОЕДИНЕНИЕ Представления_КадровыеДанныеСотрудников КАК КадровыеДанныеСотрудников
		ПО ИсполнительныеДокументы.ФизическоеЛицо = КадровыеДанныеСотрудников.ФизическоеЛицо
			И ИсполнительныеДокументы.Период = КадровыеДанныеСотрудников.Период   
	    ЛЕВОЕ СОЕДИНЕНИЕ УдержанияИсполнительных КАК УдержанияИсполнительных 
	    ПО УдержанияИсполнительных.ДокументОснование = ИсполнительныеДокументы.ИсполнительныйЛист 
	    И УдержанияИсполнительных.ФизическоеЛицо = ИсполнительныеДокументы.ФизическоеЛицо	
{ГДЕ
	ИсполнительныеДокументы.Период,
	ИсполнительныеДокументы.ИсполнительныйЛист.*,
	ИсполнительныеДокументы.Организация.*,
	ИсполнительныеДокументы.ФизическоеЛицо.*,
	(ЕСТЬNULL(КадровыеДанныеСотрудников.Фамилия + " " + КадровыеДанныеСотрудников.Имя + " " + КадровыеДанныеСотрудников.Отчество, ИсполнительныеДокументы.ФизическоеЛицо.Наименование)) КАК ФИОСотрудника,
	ИсполнительныеДокументы.Дата,
	ИсполнительныеДокументы.Номер,
	ИсполнительныеДокументы.СпособРасчета.*,
	ИсполнительныеДокументы.Процент,
	ИсполнительныеДокументы.Сумма,
	ИсполнительныеДокументы.Числитель,
	ИсполнительныеДокументы.Знаменатель,
	ИсполнительныеДокументы.Предел,
	ИсполнительныеДокументы.ПорядокРасчета,
	ИсполнительныеДокументы.ВидИсполнительногоДокумента.*,
	(ВЫРАЗИТЬ(ИсполнительныеДокументы.РеквизитыИсполнительногоДокумента КАК СТРОКА(500))) КАК РеквизитыИсполнительногоДокумента,
	ИсполнительныеДокументы.Получатель,
	(ВЫРАЗИТЬ(ИсполнительныеДокументы.АдресПолучателя КАК СТРОКА(500))) КАК АдресПолучателя,
	(ВЫРАЗИТЬ(КадровыеДанныеСотрудников.АдресМестаПроживанияПредставление КАК СТРОКА(500))) КАК АдресМестаПроживанияСотрудника}

СГРУППИРОВАТЬ ПО  
    ИсполнительныеДокументы.Организация,
    ИсполнительныеДокументы.ФизическоеЛицо, 
    ИсполнительныеДокументы.Получатель,  
    УдержанияИсполнительных.УпорядочитьДанные,
	ИсполнительныеДокументы.ПорядокРасчета,
	ИсполнительныеДокументы.Период,  
	УдержанияИсполнительных.УдержанРегистратор,
	УдержанияИсполнительных.Результат,
	УдержанияИсполнительных.ПериодИсполнительного,  
	ИсполнительныеДокументы.ИсполнительныйЛист,
	ИсполнительныеДокументы.СпособРасчета,
	ИсполнительныеДокументы.Номер,
	ИсполнительныеДокументы.Дата,
	ИсполнительныеДокументы.ВидИсполнительногоДокумента,
	ИсполнительныеДокументы.Процент,
	ИсполнительныеДокументы.Сумма,
	ИсполнительныеДокументы.Числитель,
	ИсполнительныеДокументы.Знаменатель,
	ИсполнительныеДокументы.Предел,
	ВЫРАЗИТЬ(КадровыеДанныеСотрудников.АдресМестаПроживанияПредставление КАК СТРОКА(500)),
	ЕСТЬNULL(КадровыеДанныеСотрудников.Фамилия + " " + КадровыеДанныеСотрудников.Имя + " " + КадровыеДанныеСотрудников.Отчество, ИсполнительныеДокументы.ФизическоеЛицо.Наименование),
	ВЫРАЗИТЬ(ИсполнительныеДокументы.РеквизитыИсполнительногоДокумента КАК СТРОКА(500)),
	ВЫРАЗИТЬ(ИсполнительныеДокументы.АдресПолучателя КАК СТРОКА(500))   
	
