    УстановитьПривилегированныйРежим(Истина);	

 СтандартнаяОбработка = Ложь;
 Настройки = КомпоновщикНастроек.ПолучитьНастройки();
 ПараметрыДанных = Настройки.ПараметрыДанных;
 //https://wiki.programstore.ru/vneshnie-nabory-dannyx-v-skd/   
 
 ТипГенератора = Тип("ГенераторМакетаКомпоновкиДанныхДляКоллекцииЗначений");
КомпоновщикМакета = Новый КомпоновщикМакетаКомпоновкиДанных;
//МакетКомпоновки = КомпоновщикМакета.Выполнить(СхемаКомпоновкиДанных,КомпоновщикНастроек.Настройки, , ,ТипГенератора );
 
 
 //КомпоновщикМакета = Новый КомпоновщикМакетаКомпоновкиДанных; 
 
 МакетКомпоновки = КомпоновщикМакета.Выполнить(СхемаКомпоновкиДанных, Настройки, ДанныеРасшифровки, , ТипГенератора, Ложь);
 ПроцессорКомпоновки = Новый ПроцессорКомпоновкиДанных;
 ПроцессорКомпоновки.Инициализировать(МакетКомпоновки,, ДанныеРасшифровки, Истина);
 //ПроцессорВывода = НлоновитьДокумент(ДокументРезультат);   
 
 ПроцессорВывода = Новый ПроцессорВыводаРезультатаКомпоновкиДанныхВКоллекциюЗначений;
 ТаблицаЗначений = Новый ТаблицаЗначений;
 ПроцессорВывода.УстановитьОбъект(ТаблицаЗначений);
 ПроцессорВывода.Вывести(ПроцессорКомпоновки);
 
 
 
 //МассивДокументовERP = ТаблицаЗначений.ВыгрузитьКолонку("ДокументERP"); 
 //СоответствиеДОERP = ПолучитьДанныеДокументовДООпт(МассивДокументовERP) ;
 
 Для каждого стр из ТаблицаЗначений Цикл 
	 Если ЗначениеЗаполнено(стр.ДокументERP) Тогда
		 стр.ДокументДО = ПолучитьДанныеДокумента(стр.ДокументERP);  
	 КонецЕсли;
 КонецЦикла;
 
 
 
 //Дальше поменяем набор данных
 
 ВнешниеНаборыДанных = Новый Структура;
 ВнешниеНаборыДанных.Вставить("ТаблицаДанных", ТаблицаЗначений);
 КомпоновщикМакета = Новый КомпоновщикМакетаКомпоновкиДанных;
 
 ВнешнийНД = СхемаКомпоновкиДанных.НаборыДанных.Добавить(Тип("НаборДанныхОбъектСхемыКомпоновкиДанных"));
 ИмяНД = СхемаКомпоновкиДанных.НаборыДанных[0].Имя;
 ЗаполнитьЗначенияСвойств(ВнешнийНД, СхемаКомпоновкиДанных.НаборыДанных.НаборДанных1);
 
 Для каждого ПолеСКД Из СхемаКомпоновкиДанных.НаборыДанных[0].Поля Цикл
	 НовоеПоле = ВнешнийНД.Поля.Добавить(ТипЗнч(ПолеСКД));//(Тип("ПолеНабораДанныхСхемыКомпоновкиДанных"));
	 ЗаполнитьЗначенияСвойств(НовоеПоле,ПолеСКД);
 КонецЦикла;
 
 СхемаКомпоновкиДанных.НаборыДанных.Удалить(СхемаКомпоновкиДанных.НаборыДанных[0]);
 СхемаКомпоновкиДанных.НаборыДанных[0].Имя = ИмяНД;
 СхемаКомпоновкиДанных.НаборыДанных[0].ИмяОбъекта = "ТаблицаДанных";
 
 МакетКомпоновки = КомпоновщикМакета.Выполнить(СхемаКомпоновкиДанных,Настройки,ДанныеРасшифровки );
 ПроцессорКомпоновки = Новый ПроцессорКомпоновкиДанных;
 ПроцессорКомпоновки.Инициализировать(МакетКомпоновки,ВнешниеНаборыДанных, ДанныеРасшифровки);
 ПроцессорВывода = Новый ПроцессорВыводаРезультатаКомпоновкиДанныхВТабличныйДокумент;
 ПроцессорВывода.УстановитьДокумент(ДокументРезультат);
 ПроцессорВывода.Вывести(ПроцессорКомпоновки);	 
 	УстановитьПривилегированныйРежим(Ложь);
