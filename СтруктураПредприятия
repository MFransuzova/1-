Процедура ДБ_ДанныеПодписанта(СтруктураЗапроса) 
	Если НЕ СтруктураЗапроса.Свойство("Склад") Тогда  
		Возврат;
	КонецЕсли;
	Если НЕ ЗначениеЗаполнено(СтруктураЗапроса.Склад) Тогда
		Возврат;
	КонецЕсли ;
	
	Запрос = Новый Запрос;
	Запрос.Текст = "
	|ВЫБРАТЬ
	|Спр.Ссылка   КАК Склад,
	|Спр.Подразделение КАК Подразделение, 
	|ПодразделениеСклада.ТекущийРуководитель, 
	|ПодразделениеСклада.ДБ_Организация КАК Организация,
	|ПодразделениеСклада.Родитель КАК Главный  
	|ПОМЕСТИТЬ Уровень1
	|ИЗ Справочник.Склады КАК Спр 
	|ЛЕВОЕ СОЕДИНЕНИЕ Справочник.СтруктураПредприятия КАК ПодразделениеСклада ПО ПодразделениеСклада.Ссылка = Спр.Подразделение        
	|ГДЕ Спр.Ссылка = &Склад 
	|;
	|ВЫБРАТЬ   
	|NULL КАК Склад,
	|Спр.Ссылка КАК Подразделение,
	|Спр.ТекущийРуководитель, 
	|Спр.ДБ_Организация КАК Организация,
	|Спр.Родитель КАК Главный                  
	|ПОМЕСТИТЬ Уровень2
	|ИЗ Справочник.СтруктураПредприятия КАК Спр
	|ГДЕ Спр.Ссылка В (ВЫБРАТЬ Уровень1.Главный ИЗ Уровень1 КАК Уровень1)    
	|;             
	|ВЫБРАТЬ   
	|NULL КАК Склад,
	|Спр.Ссылка КАК Подразделение,
	|Спр.ТекущийРуководитель, 
	|Спр.ДБ_Организация КАК Организация,
	|Спр.Родитель КАК Главный                  
	|ПОМЕСТИТЬ Уровень3
	|ИЗ Справочник.СтруктураПредприятия КАК Спр
	|ГДЕ Спр.Ссылка В (ВЫБРАТЬ Уровень2.Главный ИЗ Уровень2 КАК Уровень2)    
	|;     
	|ВЫБРАТЬ   
	|NULL КАК Склад,
	|Спр.Ссылка КАК Подразделение,
	|Спр.ТекущийРуководитель, 
	|Спр.ДБ_Организация КАК Организация,
	|Спр.Родитель КАК Главный                  
	|ПОМЕСТИТЬ Уровень4
	|ИЗ Справочник.СтруктураПредприятия КАК Спр
	|ГДЕ Спр.Ссылка В (ВЫБРАТЬ Уровень3.Главный ИЗ Уровень3 КАК Уровень3)    
	|;    
	|ВЫБРАТЬ   
	|NULL КАК Склад,
	|Спр.Ссылка КАК Подразделение,
	|Спр.ТекущийРуководитель, 
	|Спр.ДБ_Организация КАК Организация,
	|Спр.Родитель КАК Главный                  
	|ПОМЕСТИТЬ Уровень5
	|ИЗ Справочник.СтруктураПредприятия КАК Спр
	|ГДЕ Спр.Ссылка В (ВЫБРАТЬ Уровень4.Главный ИЗ Уровень4 КАК Уровень4)    
	|;    
	/////////////   НЕ УБИВАТЬ, вдруг надо будет другую иерархию выбрать

	//|ВЫБРАТЬ    
	//|Уровень5.Склад,
	//|Уровень5.Подразделение,
	//|Уровень5.ТекущийРуководитель,
	//|Уровень5.Организация,
	//|Уровень5.Главный КАК Подчинен
	//|ПОМЕСТИТЬ ИЕРАРХИЯОРГАНИЗАЦИИ
	//|ИЗ Уровень5 КАК Уровень5   
	//|ОБЪЕДИНИТЬ ВСЕ   
	//|ВЫБРАТЬ    
	//|Уровень3.Склад,
	//|Уровень3.Подразделение,
	//|Уровень3.ТекущийРуководитель,
	//|Уровень3.Организация,
	//|Уровень3.Главный КАК Подчинен
	//|ИЗ Уровень3 КАК Уровень3 
	//|ОБЪЕДИНИТЬ ВСЕ  
	//|ВЫБРАТЬ    
	//|Уровень4.Склад,
	//|Уровень4.Подразделение,
	//|Уровень4.ТекущийРуководитель,
	//|Уровень4.Организация,
	//|Уровень4.Главный КАК Подчинен
	//|ИЗ Уровень4 КАК Уровень4  
	//|ОБЪЕДИНИТЬ ВСЕ   
	///////////// 
	|ВЫБРАТЬ    
	|Уровень2.Склад,
	|Уровень2.Подразделение,
	|Уровень2.ТекущийРуководитель,
	|Уровень2.Организация,
	|Уровень2.Главный КАК Подчинен  
	|ПОМЕСТИТЬ ИЕРАРХИЯОРГАНИЗАЦИИ
	|ИЗ Уровень2 КАК Уровень2 
	|ОБЪЕДИНИТЬ ВСЕ   
	|ВЫБРАТЬ    
	|Уровень1.Склад,
	|Уровень1.Подразделение,
	|Уровень1.ТекущийРуководитель,
	|Уровень1.Организация,
	|Уровень1.Главный КАК Подчинен
	|ИЗ Уровень1 КАК Уровень1
	|;
	|ВЫБРАТЬ ПЕРВЫЕ 1
	|Данные.Склад,
	|Данные.Подразделение,
	|Данные.ТекущийРуководитель,
	|Данные.Организация,
	|Данные.Подчинен
	|ИЗ ИЕРАРХИЯОРГАНИЗАЦИИ КАК Данные  
	|";
	Запрос.УстановитьПараметр("Склад",СтруктураЗапроса.Склад);
	Результат = Запрос.Выполнить().Выгрузить();
	Если Результат.Количество()=0 Тогда
		Возврат;
	КонецЕсли;                                                     
	Подписант = "";
	Если ЗначениеЗаполнено(Результат[0].ТекущийРуководитель) Тогда 
		Подписант = Строка(Результат[0].ТекущийРуководитель.Фамилия)+" "+Строка(Результат[0].ТекущийРуководитель.Инициалы);
	КонецЕсли;
	
	СтруктураЗапроса.Вставить("Подписант",Подписант);        
	СтруктураЗапроса.Вставить("ПодписантДолжность", "Руководитель "+
	СтрЗаменить(Строка(Результат[0].Подразделение),"Обособленное подразделение","ОП"));  
	
	
КонецПроцедуры
