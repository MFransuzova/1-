
// + Corex Французова 12.08.2022-05.08.2022   (доработка SD 1640)
&НаСервере
Функция СоединениеСПрокси()
	РасположениеПубликации = "http://172.16.1.195:8080/bp3_CorexExpress_mfrantsuzova/ws/cx_uploadSI.1cws?wsdl";
	ИмяПользователя = "UserWs";
	Пароль = "sWUser01";
	Определение = Новый WSОпределения(РасположениеПубликации,ИмяПользователя,Пароль);
	Пространство = "http://172.16.1.195:8080/bp3_CorexExpress_mfrantsuzova";
	ИмяВебСервиса =  "cx_UploadServiceImplementation";
	ИмяФайлаПубликации = "cx_uploadSI.1cws";
	
	
	ПараметрыПодключения = ОбщегоНазначения.ПараметрыПодключенияWSПрокси();
	ПараметрыПодключения.АдресWSDL           = РасположениеПубликации;
	ПараметрыПодключения.Местоположение           = РасположениеПубликации;
	
	ПараметрыПодключения.URIПространстваИмен = Пространство;
	ПараметрыПодключения.ИмяСервиса          = ИмяВебСервиса;
	ПараметрыПодключения.ИмяТочкиПодключения = ИмяФайлаПубликации;
	ПараметрыПодключения.ИмяПользователя     = ИмяПользователя;
	ПараметрыПодключения.Пароль              = Пароль;
	ПараметрыПодключения.Таймаут             = 30;
	
	ПараметрыПодключения.Вставить("URLПространстваИмен",Пространство);
	ПараметрыПодключения.Вставить("ИмяСервиса",ИмяВебСервиса);
	ПараметрыПодключения.Вставить("ПутьСервиса",РасположениеПубликации);
	
	ПараметрыПодключения.Вставить("Пользователь",ИмяПользователя);
	ТекстОшибки = "";
	Прокси = cx_ОбменДанными.ПолучитьПрокси(ПараметрыПодключения, ТекстОшибки);
	Сообщение = Новый СообщениеПользователю;
	
	Если Прокси = Неопределено Тогда
		Сообщение.Текст = "Нет соединения";
		Сообщение.Поле = "";
		Сообщение.УстановитьДанные();
		Сообщение.Сообщить();
	КонецЕсли; 
	//Прокси = ОбщегоНазначения.СоздатьWSПрокси(ПараметрыПодключения);
	
	Возврат Прокси;
КонецФункции // ()

// - Corex Французова 12.08.2022-05.08.2022   (доработка SD 1640)
// + Corex Французова 12.08.2022-05.08.2022   (доработка SD 1640)
&НаСервере
Процедура ВыполнитьЗагрузку() Экспорт
	
	Прокси = СоединениеСПрокси();
	СтруктураWS = Новый Структура();
	Если Прокси = Неопределено Тогда
		Возврат;
	КонецЕсли;
	Прокси.uploadData(СтруктураWS) ;
КонецПроцедуры

// - Corex Французова 12.08.2022-05.08.2022   (доработка SD 1640)
